<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ ‡¶è‡¶ó‡ßç‡¶∞‡ßã ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏</title>
  <link rel="stylesheet" href="style.css" />

  <!-- ‚úÖ Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
  <header>
    <h1>‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ ‡¶è‡¶ó‡ßç‡¶∞‡ßã ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏</h1>
    <p>‡¶ó‡¶∞‡ßÅ-‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶ñ‡¶æ‡¶Æ‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ ‡¶ì ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</p>
  </header>

  <nav>
    <a href="#inventory">‡¶∏‡ßç‡¶ü‡¶ï</a>
    <a href="#history">‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø</a>
  </nav>

  <main>
    <section id="inventory">
      <h2>‡¶∏‡ßç‡¶ü‡¶ï ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h2>
      <input type="text" id="itemName" placeholder="‡¶ú‡¶ø‡¶®‡¶ø‡¶∏‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" />
      <input type="number" id="itemQty" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" />
      <button id="addBtn">‡¶∏‡ßç‡¶ü‡¶ï‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

      <table id="stockTable">
        <thead>
          <tr>
            <th>‡¶ú‡¶ø‡¶®‡¶ø‡¶∏‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
            <th>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </section>

    <section id="history">
      <h2>‡¶∏‡ßç‡¶ü‡¶ï ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø</h2>
      <ul id="historyList"></ul>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 ‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ ‡¶è‡¶ó‡ßç‡¶∞‡ßã ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏</p>
  </footer>

  <script>
    // üîß ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶¨‡ßá‡¶ú ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶¨‡¶∏‡¶æ‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá
    const firebaseConfig = {
  apiKey: "AIzaSyCeUx9rN6x6_Id_Iu4RxdTlaAXXtAm1fao",
  authDomain: "chowdhury-agro-service.firebaseapp.com",
  databaseURL: "https://chowdhury-agro-service-default-rtdb.firebaseio.com",
  projectId: "chowdhury-agro-service",
  storageBucket: "chowdhury-agro-service.firebasestorage.app",
  messagingSenderId: "503009238572",
  appId: "1:503009238572:web:4326b3a668875bba6e7b89",
  measurementId: "G-72NHR0V6SF"
    };

    // ‚úÖ Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‚úÖ ‡¶Ø‡¶ñ‡¶® DOM ‡¶≤‡ßã‡¶° ‡¶π‡ßü ‡¶§‡¶ñ‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ö ‡¶ï‡¶∞‡¶ø
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("addBtn").addEventListener("click", addItem);
    });

    function addItem() {
      const nameInput = document.getElementById("itemName");
      const qtyInput = document.getElementById("itemQty");
      const name = nameInput.value.trim();
      const qty = parseInt(qtyInput.value.trim());

      if (!name || isNaN(qty)) {
        alert("‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®");
        return;
      }

      console.log("Adding item:", name, qty); // ‚úÖ Debugging

      // ‚úÖ Firebase Realtime Database ‡¶è ‡¶≤‡ßá‡¶ñ‡¶æ
      db.ref("stock/" + name).set({
        quantity: qty,
        timestamp: new Date().toISOString()
      }).then(() => {
        console.log("Data written to Firebase");

        // ‚úÖ Table update
        const tbody = document.querySelector("#stockTable tbody");
        const row = document.createElement("tr");
        row.innerHTML = `<td>${name}</td><td>${qty}</td>`;
        tbody.appendChild(row);

        // ‚úÖ History update
        const historyList = document.getElementById("historyList");
        const li = document.createElement("li");
        li.textContent = `${name} (${qty}) ‡¶∏‡ßç‡¶ü‡¶ï‡ßá ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá`;
        historyList.appendChild(li);

        // ‚úÖ Clear input
        nameInput.value = "";
        qtyInput.value = "";
      }).catch((error) => {
        console.error("Firebase write failed:", error);
        alert("Firebase-‡¶è ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ Console ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
      });
    }
  </script>
</body>
</html>
